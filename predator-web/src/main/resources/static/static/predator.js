webpackJsonp([0],[,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.Layer=t.Shape=t.Stage=void 0;var i=n(58),o=r(i),a=n(59),u=r(a),s=n(17),l=r(s);t.Stage=o.default,t.Shape=u.default,t.Layer=l.default},,,,function(e,t){(function(t){e.exports=t}).call(t,{})},,,,,,,function(e,t,n){"use strict";function r(){var e=(0,u.default)(document.body),t=e.getChildWithClass("toast-box");return t||(t=(0,u.default)(document.createElement("div")),t.addClass("toast-box"),e.append(t.el)),t}function i(e,t){var n=(0,u.default)(document.createElement("div")),r=(0,u.default)(document.createElement("span"));n.addClass("toast"),r.el.innerText=t,n.append(r.el),e.append(n.el),setTimeout(function(){o(e,n)},s)}function o(e,t){t.addClass("fade"),setTimeout(function(){e.remove(t.el)},l)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(16),u=function(e){return e&&e.__esModule?e:{default:e}}(a);u.default.fn.append=function(e){this.el.appendChild(e)},u.default.fn.remove=function(e){this.el.removeChild(e)},u.default.fn.getChildWithClass=function(e){for(var t=this.el.children,n=0;n<t.length;n++){var r=(0,u.default)(t[n]);if(r.hasClass(e))return r}return null};var s=4e3,l=1500,c={makeToast:function(e){i(r(),e)}};t.default=c},function(e,t,n){"use strict";function r(e){return new r.fn.init(e)}function i(e){return e._uid_||(e._uid_=b++),e._uid_}function o(e,t,n){v[e]||(v[e]=[]),v[e].push({event:t,fn:n})}function a(e,t,n){var r=v[e];if(r){var i=[];return r.forEach(function(e){e.event===t&&(void 0===n?i.push(e):e.fn===n&&i.push(e))}),i.forEach(function(e){var t=r.indexOf(e);r.splice(t,1)}),i}}function u(e,t){this.el.addEventListener(e,t),o(i(this.el),e,t)}function s(e,t){var n=a(this.el._uid_,e,t);n&&n.forEach(function(e){this.el.removeEventListener(e.event,e.fn)})}function l(e){return e.replace(/^[\s]+|[\s]+$/g,"")}function c(e){return" "+l(e.className||"")+" "}function f(e,t){e.className=l(t)}function h(e){return c(this.el).indexOf(" "+e+" ")>-1}function p(e){this.hasClass(e)||f(this.el,c(this.el)+e)}function d(e){this.hasClass(e)&&f(this.el,c(this.el).replace(" "+e+" "," "))}function y(e){this.hasClass(e)?this.removeClass(e):this.addClass(e)}Object.defineProperty(t,"__esModule",{value:!0}),r.fn=r.prototype={constructor:r,init:function(e){this.el=e}},r.fn.init.prototype=r.fn;var v={},b=1e3;r.fn.on=u,r.fn.off=s,r.fn.hasClass=h,r.fn.addClass=p,r.fn.removeClass=d,r.fn.toggleClass=y,t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return"object"===(void 0===e?"undefined":u(e))&&null!==e?e.constructor.name:""+e}function o(e){if(!(e&&"draw"in e))throw new TypeError(i(e)+" is not drawable")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(){r(this,e),this._children=[]}return a(e,[{key:"getAt",value:function(e){return this._children[e]}},{key:"add",value:function(e){o(e),this._children.push(e)}},{key:"remove",value:function(e){o(e);var t=this._children.indexOf(e);return t>-1?this._children.splice(t,1)[0]:null}},{key:"redraw",value:function(){for(var e=0;e<this._children.length;e++)this._children[e].redraw()}},{key:"draw",value:function(e){for(var t=0;t<this._children.length;t++)this._children[t].draw(e)}},{key:"length",get:function(){return this._children.length}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.black="#000000",t.white="#ffffff",t.cyan="#33eefe",t.orange="#fc8800",t.darkGray="#323842",t.dustGray="#666970",t.lightGray="#e5e5e5"},function(e,t,n){n(20),e.exports=n(62)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();n(21);var s=n(1),l=r(s),c=n(7),f=r(c),h=n(32),p=r(h),d=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){return l.default.createElement("header",{className:"header"},l.default.createElement("div",{className:"container"},l.default.createElement("h2",{className:"heading"},"Search Robot"),l.default.createElement(p.default,null)))}}]),t}(l.default.Component);f.default.render(l.default.createElement(d,null),document.getElementById("app"))},function(e,t,n){"use strict";var r=n(1);(function(e){return e&&e.__esModule?e:{default:e}})(r).default.Component.prototype.binds=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("function"!=typeof this[n])throw new TypeError("Failed to bind context to "+n);this[n]=this[n].bind(this)}}},,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),l=r(s),c=n(33),f=r(c),h=n(34),p=r(h),d=n(35),y=r(d),v=n(15),b=r(v),w=n(55),_=r(w),g=n(57),m=r(g),k=function(e){function t(){i(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={speaking:!1,query:""},e.binds(["toggleSearch"]),e.canvas=null,e.viewer=null,e.bell=new f.default({meter:{minLimit:5,maxLimit:35}}),e.setupBell(e.bell),e}return a(t,e),u(t,[{key:"setupBell",value:function(e){var t=this;e.on("wave",function(e){t.viewer.putValue(e.value)}),e.on("start",function(e){t.viewer.startUpdate(),t.setState({speaking:!0})}),e.on("stop",function(e){t.sendRequest(t.bell.result),t.viewer.stopUpdate(),t.setState({speaking:!1})})}},{key:"componentDidMount",value:function(){this.viewer=new m.default(this.canvas),_.default.initView()}},{key:"toggleSearch",value:function(){"inactive"===this.bell.state?(this.bell.start(40),this.setAutoStop()):this.bell.stop()}},{key:"setAutoStop",value:function(){var e=this;setTimeout(function(){"recording"===e.bell.state&&e.bell.stop()},5e3)}},{key:"sendRequest",value:function(e){var t=this,n=new FormData;n.append("audio",e),y.default.post("/api/asr",n).then(function(e){t.viewer.blink(),t.handleResult(e.data)}).catch(function(e){t.handleError(e)})}},{key:"handleResult",value:function(e){var t=e.overview;t=t.replace(/(\u3002|\uFF0C)+$/,""),this.setState({query:t}),_.default.parseQuery(e)}},{key:"handleError",value:function(e){b.default.makeToast("Oops... Network error occurred"),console.error(e)}},{key:"render",value:function(){var e=this;return l.default.createElement("div",{className:"speech-portal"},l.default.createElement("div",{className:"search-box"},l.default.createElement("input",{type:"text",value:this.state.query}),l.default.createElement("a",{className:"vbtn",href:"javascript:void(0)",onClick:this.toggleSearch},l.default.createElement("span",{className:"acicon-speech"+(0,p.default)({"-on":this.state.speaking})}))),l.default.createElement("div",{className:"stage-holder"},l.default.createElement("canvas",{ref:function(t){return e.canvas=t},onClick:this.toggleSearch})))}}]),t}(l.default.Component);t.default=k},function(e,t,n){"use strict";function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return Array.prototype.slice.call(e,t)}function u(e){return new d(e)}function s(e){if("string"!=typeof e)throw new TypeError(e+" is not a string");return new g(e)}function l(e){if(s("navigator.mediaDevices.getUserMedia").hadBy(window)){return s("navigator.mediaDevices").from(window).getUserMedia(e)}var t=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;if(!t)throw new Error("getUserMedia is not supported by this browser");return new Promise(function(n,r){t(e,n,r)})}function c(){return l({audio:!0,video:!1})}function f(e,t){return new Error("Failed to execute '"+e+"' on 'Recorder'"+(t?":\nThe Recorder's state is '"+t.state+"'.":""))}Object.defineProperty(t,"__esModule",{value:!0});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(){function e(){o(this,e),this.handlerMap={}}return h(e,[{key:"on",value:function(e,t){if("string"!=typeof e)throw new TypeError(e+" is not a string");if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=this.handlerMap,r=n[e]=n[e]||[];return-1===r.indexOf(t)&&r.push(t),this}},{key:"off",value:function(e,t){if(void 0===t)return delete this.handlerMap[e],this;var n=this.handlerMap[e];if(n){var r=n.indexOf(t);r>=0&&n.splice(r,1),0===n.length&&this.off(e)}return this}},{key:"emit",value:function(e){var t=a(arguments,1),n=this.handlerMap[e];if(n)for(var r=0,i=n.length;r<i;r++)n[r].apply(void 0,t);return this}}]),e}(),d=function(){function e(t){o(this,e),this.value=t,this._negative=!1,this._error=new Error("Assertion failed")}return h(e,[{key:"that",value:function(e){return this._error=e,this}},{key:"equal",value:function(e){if(e===this.value===this._negative)throw this._error}},{key:"to",get:function(){return this}},{key:"not",get:function(){return this._negative=!this._negative,this}}]),e}(),y=window.AudioContext||window.webkitAudioContext,v=null,b=function(){function e(){o(this,e)}return h(e,[{key:"context",get:function(){return v||(v=new y),v}}]),e}(),w=function(e){function t(e,n){o(this,t);var i=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.mainbus=e,i.options=Object.assign({minLimit:0,maxLimit:128,fftSize:1024,smoothing:.3},n),i._checkOptions(i.options),i._cache=null,i.source=null,i.analyser=i._initAnalyser(i.options),i}return i(t,e),h(t,[{key:"_checkOptions",value:function(e){if(e.maxLimit<=e.minLimit)throw new RangeError("Wrong limit range for volume")}},{key:"_initAnalyser",value:function(e){var t=this,n=this.context.createAnalyser();return n.fftSize=e.fftSize,n.smoothingTimeConstant=e.smoothing,this.mainbus.on("dataavailable",function(e){return t._processData()}),n}},{key:"pipe",value:function(e){this.source=this.context.createMediaStreamSource(e),this.source.connect(this.analyser)}},{key:"cutoff",value:function(){this.source.disconnect(this.analyser),this.source=null}},{key:"_processData",value:function(){this._cache||(this._cache=new Uint8Array(this.analyser.frequencyBinCount)),this.analyser.getByteFrequencyData(this._cache);var e=this._calcAvgVolume(this._cache);this.mainbus.emit("wave",{value:this._alignVolume(e)})}},{key:"_alignVolume",value:function(e){var t=this.options;return e<t.minLimit&&(e=t.minLimit),e>t.maxLimit&&(e=t.maxLimit),(e-t.minLimit)/(t.maxLimit-t.minLimit)}},{key:"_calcAvgVolume",value:function(e){for(var t=0,n=e.length,r=0;r<n;r++)t+=e[r];return t/n}}]),t}(b),_=Object.prototype.hasOwnProperty,g=function(){function e(t){o(this,e),this.steps=t.split("."),this.fallback=void 0}return h(e,[{key:"travel",value:function(e,t){if("function"!=typeof t)throw new TypeError(t+" is not a function");for(var n=this.steps.length,r=0,i=this.steps[r];t(e,i)&&r<n;)e=e[i],i=this.steps[++r];return{step:r,value:e}}},{key:"or",value:function(e){return this.fallback=e,this}},{key:"from",value:function(e){var t=this.travel(e,function(e,t){return null!=e&&t in Object(e)});return t.step===this.steps.length?t.value:this.fallback}},{key:"hadBy",value:function(e){return this.travel(e,function(e,t){return null!=e&&t in Object(e)}).step===this.steps.length}},{key:"ownedBy",value:function(e){return this.travel(e,function(e,t){return null!=e&&_.call(e,t)}).step===this.steps.length}}]),e}(),m=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.options=Object.assign({mimeType:"audio/webm",audioBitsPerSecond:96e3},e),n._intern=null,n._result=null,n._filter=new w(n,n.options.meter),n}return i(t,e),h(t,[{key:"open",value:function(){var e=this;return u(this.ready).that(f("open")).to.equal(!1),c().then(function(t){e._intern=new MediaRecorder(t,e.options),["error","pause","resume","start","stop"].map(function(t){e._intern.addEventListener(t,function(n){return e.emit(t,n)})}),e._intern.addEventListener("dataavailable",function(t){e._result.push(t.data),e.emit("dataavailable",t)}),e._filter.pipe(t)})}},{key:"close",value:function(){u(this.ready).that(f("close")).to.equal(!0);for(var e=this._intern.stream.getTracks(),t=0;t<e.length;t++)e[t].stop();this._filter.cutoff(),this._intern=null}},{key:"start",value:function(e){var t=this;u(this.state).that(f("start",this)).to.equal("inactive"),this._result=[],this.ready?this._intern.start(e):this.open().then(function(){t._intern.start(e)})}},{key:"stop",value:function(){u(this.state).that(f("stop",this)).to.not.equal("inactive"),this._intern.stop()}},{key:"pause",value:function(){u(this.state).that(f("pause",this)).to.equal("recording"),this._intern.pause()}},{key:"resume",value:function(){u(this.state).that(f("resume",this)).to.equal("paused"),this._intern.resume()}},{key:"state",get:function(){return null===this._intern?"inactive":this._intern.state}},{key:"ready",get:function(){return null!==this._intern}},{key:"result",get:function(){return this._result?new Blob(this._result,{type:this.options.mimeType}):null}}]),t}(p),k=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),t}(m);t.default=k},function(e,t,n){"use strict";var r,i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/*!
  Copyright (c) 2016 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/
!function(){function a(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=void 0===n?"undefined":o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n))e.push(a.apply(null,n));else if("object"===r)for(var i in n)u.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}var u={}.hasOwnProperty;void 0!==e&&e.exports?e.exports=a:"object"===o(n(8))&&n(8)?(r=[],void 0!==(i=function(){return a}.apply(t,r))&&(e.exports=i)):window.classNames=a}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(9),i=function(e){return e&&e.__esModule?e:{default:e}}(r),o=i.default.create({baseURL:location.origin});t.default=o},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(16),o=r(i),a=n(56),u=r(a);o.default.fn.insertAfter=function(e){var t=this.el.nextSibling;this.el.parentNode.insertBefore(e,t)};var s=new u.default,l={frame:null,initView:function(){var e=this;this.frame=document.createElement("iframe"),this.initStyles(this.frame.style),(0,o.default)(document.getElementById("app")).insertAfter(this.frame),s.onResult=function(t){e.frame.src=t}},initStyles:function(e){e.width="100%",e.height=window.innerHeight-480+"px",e.minHeight="50%",e.border="none"},parseQuery:function(e){s.parse(e)}};t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(15),a=function(e){return e&&e.__esModule?e:{default:e}}(o),u=function(){function e(){r(this,e),this.onResult=function(e){}}return i(e,[{key:"parse",value:function(e){var t=this.tokenize(e.result),n=this.analyse(t);n?this.onResult(n):a.default.makeToast("Sorry, Can you speak again?")}},{key:"tokenize",value:function(e){for(var t=[],n=0;n<e.length;n++)for(var r=e[n],i=r.ws,o=0;o<i.length;o++)for(var a=i[o],u=a.cw,s=0;s<u.length;s++){var l=u[s];this.filter(l)&&t.push(l.w)}return t}},{key:"filter",value:function(e){return!/(\u3002|\uFF0C)+/.test(e.w)}},{key:"analyse",value:function(e){var t="",n="",r="";1===e.length?r=e[0]:2===e.length?(t=e[0],n=e[1]):e.length>=3&&(t=e[0],n=e[1],r=e.slice(2).join(""));var i="",o=s;switch(t){case"打开":i="open",o=o.open;break;case"搜索":i="search",o=o.search;break;default:i="search",o=o.search,r=t+n+r,n=""}switch(n){case"百度":o=o.bd;break;case"谷歌":o=o.gg;break;case"京东":o=o.jd;break;case"淘宝":o=o.tb;break;case"知乎":o=o.zh;break;default:o=o.bd}return"search"===i&&(o+=r),o}}]),e}(),s={open:{bd:"https://www.baidu.com/",gg:"https://www.google.com/",jd:"https://www.jd.com/",tb:"https://www.taobao.com/",zh:"https://www.zhihu.com/"},search:{bd:"https://www.baidu.com/s?wd=",gg:"https://www.google.com.hk/search?q=",jd:"https://search.jd.com/Search?keyword=",tb:"https://s.taobao.com/search?q=",zh:"https://www.zhihu.com/search?q="}};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(4),l=n(60),c=r(l),f=n(61),h=r(f),p=function(e){function t(e){i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.active=!1,n.init(),n.renderFrame(),n}return a(t,e),u(t,[{key:"init",value:function(){this.backLayer=new c.default,this.add(this.backLayer),this.waveLayer=new h.default,this.add(this.waveLayer)}},{key:"putValue",value:function(e){this.waveLayer.value=e}},{key:"clearValue",value:function(){this.waveLayer.clear()}},{key:"blink",value:function(){var e=this;this.startUpdate(),this.backLayer.blink(),setTimeout(function(){e.stopUpdate()},1e3)}},{key:"update",value:function(){var e=this;this.active&&requestAnimationFrame(function(){return e.update()}),this.renderFrame()}},{key:"startUpdate",value:function(){this.active=!0,this.update()}},{key:"stopUpdate",value:function(){this.active=!1,this.clearValue()}}]),t}(s.Stage);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(17),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l={canvas:null,get width(){return this.canvas.width},get height(){return this.canvas.height}},c=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(n.canvas=e,n._context=n._initContext(),l.canvas)throw new Error("Stage cannot be reinitialized");return l.canvas=e,n}return o(t,e),a(t,[{key:"_initContext",value:function(){var e=getComputedStyle(this.canvas),t=parseInt(e.width,10),n=parseInt(e.height,10);return this.resize(t,n),this.canvas.getContext("2d")}},{key:"resize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"renderFrame",value:function(){var e=this._context;this.draw(e)}}],[{key:"get",value:function(e){return l[e]}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;r(this,e),this.x=t,this.y=n,this.width=i,this.height=o,this._dirty=!0}return i(e,[{key:"redraw",value:function(){this._dirty=!0}},{key:"draw",value:function(e){this._dirty&&(e.save(),e.translate(this.x,this.y),this.onDraw(e),e.restore(),this._dirty=!1)}},{key:"onDraw",value:function(e){}}]),e}();t.default=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),s=n(18),l=function(e){function t(e){var n;r(this,t);for(var o=arguments.length,a=Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];var l=i(this,(n=t.__proto__||Object.getPrototypeOf(t)).call.apply(n,[this].concat(a)));return l.matrix="r"===e?[1,0,0,1,0,0]:[-1,0,0,1,l.width,0],l.bows=[{color:s.lightGray,size:1},{color:s.orange,size:.4}],l}return o(t,e),a(t,[{key:"onDraw",value:function(e){var t=.3*this.height,n=.7*this.height;e.clearRect(0,0,this.width,this.height),e.transform.apply(e,this.matrix);for(var r=0;r<this.bows.length;r++){var i=this.bows[r];e.beginPath(),e.moveTo(0,0),e.lineTo(10,0),e.bezierCurveTo(this.width*i.size,t,this.width*i.size,n,10,this.height),e.lineTo(0,this.height),e.closePath(),e.fillStyle=i.color,e.fill()}}}]),t}(u.Shape),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"onDraw",value:function(e){var t=.3*this.width,n=.7*this.width,r=.3*this.height,i=.6*this.height;e.clearRect(0,0,this.width,this.height),e.beginPath(),e.moveTo(10,15),e.bezierCurveTo(t,0,n,0,this.width-10,15),e.bezierCurveTo(this.width,r,this.width,i,this.width-10,this.height-15),e.bezierCurveTo(n,this.height,t,this.height,10,this.height-15),e.bezierCurveTo(0,i,0,r,10,15),e.closePath(),e.fillStyle=s.lightGray,e.fill()}}]),t}(u.Shape),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),a(t,[{key:"onDraw",value:function(e){var t=10,n=.3*this.width,r=.7*this.width,i=.3*this.height,o=.7*this.height;e.beginPath(),e.moveTo(14,10),e.bezierCurveTo(n,0,r,0,this.width-4-t,10),e.arcTo(this.width-4,10,this.width-4,20,t),e.bezierCurveTo(this.width,i,this.width,o,this.width-4,this.height-10-t),e.arcTo(this.width-4,this.height-10,this.width-4-t,this.height-10,t),e.bezierCurveTo(r,this.height,n,this.height,14,this.height-10),e.arcTo(4,this.height-10,4,this.height-10-t,t),e.bezierCurveTo(0,o,0,i,4,20),e.arcTo(4,10,14,10,t),e.closePath(),e.fillStyle=s.darkGray,e.fill()}}]),t}(u.Shape),h=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var u=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return u._color=s.lightGray,u}return o(t,e),a(t,[{key:"onDraw",value:function(e){var t=.1*this.width,n=.9*this.width;e.beginPath(),e.moveTo(0,this.height),e.lineTo(t,0),e.lineTo(n,0),e.lineTo(this.width,this.height),e.strokeStyle=s.dustGray,e.stroke(),e.closePath(),e.fillStyle=this._color,e.fill()}},{key:"color",set:function(e){this._color=e,this.redraw()}}]),t}(u.Shape),p=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=.5*u.Stage.get("width");return e.add(e._initAddons(n)),e.add(e._initHead(n)),e.add(e._initGlass(n)),e.add(e._initMouth(n)),e._timer=0,e}return o(t,e),a(t,[{key:"blink",value:function(){var e=this._children[3];e&&(clearTimeout(this._timer),this._blinkMouth(e,0))}},{key:"_blinkMouth",value:function(e,t){var n=this;6!==t&&(e.color=t%2==0?s.darkGray:s.lightGray,this.redraw(),this._timer=setTimeout(function(){n._blinkMouth(e,t+1)},200))}},{key:"_initAddons",value:function(e){var t=e-135-35,n=e+135,r=new u.Layer;return r.add(new l("l",t,60,35,80)),r.add(new l("r",n,60,35,80)),r}},{key:"_initHead",value:function(e){return new c(e-140,20,280,160)}},{key:"_initGlass",value:function(e){return new f(e-112,44,224,100)}},{key:"_initMouth",value:function(e){return new h(e-30,160,60,15)}}]),t}(u.Layer);t.default=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(4),s=n(18),l=function(e){function t(){var e;r(this,t);for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];var u=i(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o)));return u._value=0,u}return o(t,e),a(t,[{key:"onDraw",value:function(e){var t=this._value*this.width,n=.5*(this.width-t);e.fillStyle=s.darkGray,e.fillRect(0,0,this.width,this.height),e.fillStyle=s.cyan,e.fillRect(n,0,t,this.height)}},{key:"value",get:function(){return this._value},set:function(e){this._value=e,this.redraw()}}]),t}(u.Shape),c=function(e){function t(){r(this,t);for(var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),n=.5*u.Stage.get("width"),o=n-100,a=0;a<5;a++)e.add(new l(o,60+14*a,200,12));return e}return o(t,e),a(t,[{key:"clear",value:function(){for(var e=0;e<this.length;e++)this.getAt(e).value=0}},{key:"value",set:function(e){for(var t=this.length-1;t>0;t--)this.getAt(t).value=this.getAt(t-1).value;this.getAt(0).value=e}}]),t}(u.Layer);t.default=c},function(e,t){}],[19]);